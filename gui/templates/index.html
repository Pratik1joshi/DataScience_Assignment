<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transport Risk Analytics</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=Space+Grotesk:wght@500;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="background-pattern"></div>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <div class="logo-icon">
                    <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                        <rect x="4" y="8" width="24" height="20" rx="2" stroke="currentColor" stroke-width="2"/>
                        <path d="M8 12h16M12 20v-4M20 20v-4" stroke="currentColor" stroke-width="2"/>
                    </svg>
                </div>
                <div class="logo-text">
                    <h1>Transport Analytics</h1>
                    <span class="logo-subtitle">Risk Prediction Platform</span>
                </div>
            </div>
            <div class="model-badge">
                <div class="badge-content">
                    <span class="badge-label">Model Accuracy</span>
                    <span class="badge-value" id="model-accuracy">—</span>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Input Form -->
            <div class="card input-card">
                <div class="card-header">
                    <h2>Journey Parameters</h2>
                    <p class="subtitle">Configure route and schedule attributes for risk assessment</p>
                </div>

                <form id="prediction-form">
                    <!-- Row 1: Line and Direction -->
                    <div class="form-row">
                        <div class="form-group">
                            <label for="line_name">Bus Line</label>
                            <select id="line_name" name="line_name" required>
                                <option value="">Select line...</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="direction">Direction</label>
                            <select id="direction" name="direction" required>
                                <option value="">Select direction...</option>
                            </select>
                        </div>
                    </div>

                    <!-- Row 2: Time Details -->
                    <div class="form-row">
                        <div class="form-group">
                            <label for="departure_hour">Departure Hour (0-23)</label>
                            <input type="number" id="departure_hour" name="departure_hour" 
                                   min="0" max="23" required placeholder="e.g., 8">
                        </div>
                        <div class="form-group">
                            <label for="day_of_week">Day of Week</label>
                            <select id="day_of_week" name="day_of_week" required>
                                <option value="">Select day...</option>
                                <option value="0">Monday</option>
                                <option value="1">Tuesday</option>
                                <option value="2">Wednesday</option>
                                <option value="3">Thursday</option>
                                <option value="4">Friday</option>
                                <option value="5">Saturday</option>
                                <option value="6">Sunday</option>
                            </select>
                        </div>
                    </div>

                    <!-- Row 3: Time Period and Zone -->
                    <div class="form-row">
                        <div class="form-group">
                            <label for="time_of_day">Time Period</label>
                            <select id="time_of_day" name="time_of_day" required>
                                <option value="">Select period...</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="lat_zone">Latitude Zone</label>
                            <select id="lat_zone" name="lat_zone" required>
                                <option value="">Select zone...</option>
                            </select>
                        </div>
                    </div>

                    <!-- Row 4: Location -->
                    <div class="form-row">
                        <div class="form-group">
                            <label for="latitude">Latitude</label>
                            <input type="number" id="latitude" name="latitude" 
                                   step="0.000001" min="51.2" max="51.6" required placeholder="51.48">
                        </div>
                        <div class="form-group">
                            <label for="longitude">Longitude</label>
                            <input type="number" id="longitude" name="longitude" 
                                   step="0.000001" min="-0.5" max="0.5" required placeholder="0.05">
                        </div>
                    </div>

                    <!-- Row 5: Route Details -->
                    <div class="form-row">
                        <div class="form-group">
                            <label for="stop_sequence">Stop Sequence</label>
                            <input type="number" id="stop_sequence" name="stop_sequence" 
                                   min="1" required placeholder="e.g., 10">
                        </div>
                        <div class="form-group">
                            <label for="run_time_min">Run Time (minutes)</label>
                            <input type="number" id="run_time_min" name="run_time_min" 
                                   min="1" required placeholder="e.g., 25">
                        </div>
                    </div>

                    <!-- Submit Button -->
                    <button type="submit" class="btn-predict" id="predict-btn">
                        <span class="btn-text">
                            <span class="btn-label">Run Analysis</span>
                            <svg class="btn-arrow" width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M7 3l7 7-7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                        </span>
                        <span class="btn-loader" style="display: none;">
                            <span class="spinner"></span>
                            <span>Processing</span>
                        </span>
                    </button>
                </form>
            </div>

            <!-- Results Card -->
            <div class="card results-card" id="results-card" style="display: none;">
                <div class="card-header">
                    <h2>Risk Assessment</h2>
                </div>
                
                <div class="risk-indicator" id="risk-indicator">
                    <div class="risk-badge" id="risk-badge">
                        <div class="risk-status" id="risk-status"></div>
                        <div class="risk-label" id="risk-label">High Risk</div>
                    </div>
                    <div class="risk-probability" id="risk-probability">75%</div>
                </div>

                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-label">Probability Score</div>
                        <div class="metric-value" id="metric-prob">0.75</div>
                        <div class="metric-bar">
                            <div class="metric-fill" id="prob-bar" style="width: 75%"></div>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Confidence</div>
                        <div class="metric-value" id="metric-confidence">85%</div>
                        <div class="metric-bar">
                            <div class="metric-fill confidence-fill" id="conf-bar" style="width: 85%"></div>
                        </div>
                    </div>
                </div>

                <div class="prediction-details">
                    <h3>Model Details</h3>
                    <div class="details-grid">
                        <div class="detail-item">
                            <span class="detail-label">Algorithm</span>
                            <span class="detail-value" id="model-type">Random Forest</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Estimators</span>
                            <span class="detail-value" id="num-trees">100</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Latency</span>
                            <span class="detail-value" id="pred-time">—</span>
                        </div>
                    </div>
                </div>

                <button class="btn-secondary" onclick="resetForm()">
                    <span>New Prediction</span>
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <path d="M14 8A6 6 0 1 1 8 2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        <path d="M8 2L8 6L12 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <div class="footer-stats">
                    <div class="stat-item">
                        <span class="stat-label">Accuracy</span>
                        <span class="stat-value" id="footer-accuracy">—</span>
                    </div>
                    <div class="stat-divider"></div>
                    <div class="stat-item">
                        <span class="stat-label">AUC-ROC</span>
                        <span class="stat-value" id="footer-auc">—</span>
                    </div>
                </div>
                <p class="footer-credit">Transport Analytics Platform · Softwarica 2026</p>
            </div>
        </footer>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
